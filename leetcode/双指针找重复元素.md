# 287. Find the Duplicate Number

题目描述：给定长度为n+1的数组，每一位数在1到n之间，只有一个数字是重复的，找到它。要求时间复杂度小于O(n^2)，空间复杂度为常数。

```
Example 1:
Input: [1,3,4,2,2]
Output: 2
Example 2:
Input: [3,1,3,4,2]
Output: 3
```

解题思路：最容易想的就是双指针，二重循环找重复元素，但这显然不是本题的最优解。第二种思路是排序之后每两位比较一次，时间复杂度为O(nlogn)。最巧妙的思路时间复杂度为O(n)。代码如下：

```java
public int findDuplicate(int[] nums) {
        if(nums.length == 0) return 0;
        int slow = nums[0];
        int fast = nums[nums[0]];
        while(slow != fast){
            if(nums[slow] == slow)
                return slow;
            slow = nums[slow];
            fast = nums[nums[fast]];
        }
        fast = 0;
        while(fast != slow){
            fast = nums[fast];
            slow = nums[slow];
        }
        return slow;
    }
```

因为只有一个数字是重复的，如果慢指针slow原地不动，说明存在nums[index] == slow && nums[slow] == slow，因此slow就是重复的数字。否则，这道题被转换为环链表求入口的问题。快慢指针相遇后，快指针从数组入口处和慢指针同一步长前进，直到再次相遇（相等）。相遇位置即入口（重复数字）。这里给出142题的证明过程:

```
t = X + nY + K
2t = X + mY + K
=> X + K = (m - 2n)Y
```

X表示从头指针到环链表入口的距离，Y是环的长度，K是链表入口到相遇点的距离，t是步数。慢指针在相遇位置走X距离，一定会到环表的入口。